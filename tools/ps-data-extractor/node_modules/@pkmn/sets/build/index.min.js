window.pkmn=window.pkmn||{};window.pkmn.sets=(()=>{var x=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var R=Object.prototype.hasOwnProperty;var F=(e,t)=>{for(var s in t)x(e,s,{get:t[s],enumerable:!0})},C=(e,t,s,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of E(t))!R.call(e,n)&&n!==s&&x(e,n,{get:()=>t[n],enumerable:!(i=M(t,n))||i.enumerable});return e};var J=e=>C(x({},"__esModule",{value:!0}),e);var Z={};F(Z,{Sets:()=>g,Team:()=>v,Teams:()=>c});function y(e){return typeof e!="string"&&typeof e!="number"?"":(""+e).toLowerCase().replace(/[^a-z0-9]+/g,"")}var D={hp:"HP",atk:"Atk",def:"Def",spa:"SpA",spd:"SpD",spe:"Spe"},h=Object.keys(D),H={HP:"hp",hp:"hp",Attack:"atk",Atk:"atk",atk:"atk",Defense:"def",Def:"def",def:"def","Special Attack":"spa",SpA:"spa",SAtk:"spa",SpAtk:"spa",spa:"spa",Special:"spa",spc:"spa",Spc:"spa","Special Defense":"spd",SpD:"spd",SDef:"spd",SpDef:"spd",spd:"spd",Speed:"spe",Spe:"spe",Spd:"spe",spe:"spe"},g=new class{pack(e){return g.packSet(e)}packSet(e){let t="";t+=e.name||e.species;let s=b(e.species);t+="|"+(b(e.name||e.species)===s?"":s),t+="|"+b(e.item),t+="|"+(b(e.ability)||"-");let i="";if(t+="|",e.moves)for(let p=0;p<e.moves.length;p++){let l=b(e.moves[p]);p&&!l||(t+=(p?",":"")+l,l.substr(0,11)==="HiddenPower"&&l.length>11&&(i=l.slice(11)))}t+="|"+(e.nature||"");let n="|";e.evs&&(n="|"+(e.evs.hp||"")+","+(e.evs.atk||"")+","+(e.evs.def||"")+","+(e.evs.spa||"")+","+(e.evs.spd||"")+","+(e.evs.spe||"")),n==="|,,,,,"?t+="|":t+=n,e.gender?t+="|"+e.gender:t+="|";let r=p=>!("ivs"in e)||e.ivs[p]===31||e.ivs[p]===void 0?"":e.ivs[p].toString(),o="|";e.ivs&&(o="|"+r("hp")+","+r("atk")+","+r("def")+","+r("spa")+","+r("spd")+","+r("spe")),o==="|,,,,,"?t+="|":t+=o,e.shiny?t+="|S":t+="|",e.level&&e.level!==100?t+="|"+e.level:t+="|",e.happiness!==void 0&&e.happiness!==255?t+="|"+e.happiness:t+="|";let a=e.dynamaxLevel!==void 0&&e.dynamaxLevel!==10;return(e.pokeball||e.hpType&&!i||e.gigantamax||a||e.teraType)&&(t+=","+(e.hpType||""),t+=","+b(e.pokeball||""),t+=","+(e.gigantamax?"G":""),t+=","+(a?e.dynamaxLevel:""),t+=","+(e.teraType||"")),t}exportSet(e,t){let s="",i=e.species||e.name||"";if(i=t?.species.get(i)?.name||i,e.name&&e.name!==i?s+=""+e.name+" ("+i+")":s+=""+i,(!t||t.gen>=2)&&(e.gender==="M"&&(s+=" (M)"),e.gender==="F"&&(s+=" (F)")),e.item){let r=t?.items.get(e.item)?.name??e.item;s+=" @ "+r}if(s+=`  
`,e.ability&&(!t||t?.gen>=3)){let r=t?.abilities.get(e.ability)?.name??e.ability;s+="Ability: "+r+`  
`}if(e.level&&e.level!==100&&(s+="Level: "+e.level+`  
`),e.shiny&&(!t||t.gen>=2)&&(s+=`Shiny: Yes  
`),typeof e.happiness=="number"&&e.happiness!==255&&!isNaN(e.happiness)&&(!t||t.gen>=2)&&(s+="Happiness: "+e.happiness+`  
`),e.pokeball&&(s+="Pokeball: "+e.pokeball+`  
`),e.hpType&&(s+="Hidden Power: "+e.hpType+`  
`),typeof e.dynamaxLevel=="number"&&e.dynamaxLevel!==10&&!isNaN(e.dynamaxLevel)&&(s+="Dynamax Level: "+e.dynamaxLevel+`  
`),e.gigantamax&&(s+=`Gigantamax: Yes  
`),e.teraType){let r=t?.species.get(i);s+="Tera Type: "+(r?.forceTeraType||e.teraType||r?.types?.[0])+`  
`}let n=!0;if(e.evs&&(!t||t.gen>=3))for(let r of h)e.evs[r]&&(n?(s+="EVs: ",n=!1):s+=" / ",s+=""+e.evs[r]+" "+D[r]);if(n||(s+=`  
`),e.nature&&(!t||t.gen>=3)&&(s+=""+e.nature+` Nature  
`),n=!0,e.ivs){let r=!0,o;if(e.moves){for(let a of e.moves)if(o=A(a),o){let p=L(o,t);if(!p)continue;for(let l of h)if((e.ivs[l]===void 0?31:e.ivs[l])!==(p[l]||31)){r=!1;break}}}if(r&&!o){for(let a of h)if(e.ivs[a]!==31&&e.ivs[a]!==void 0){r=!1;break}}if(!r)for(let a of h)typeof e.ivs[a]>"u"||isNaN(e.ivs[a])||e.ivs[a]===31||(n?(s+="IVs: ",n=!1):s+=" / ",s+=""+e.ivs[a]+" "+D[a])}if(n||(s+=`  
`),e.moves)for(let r of e.moves)r&&(r=t?.moves.get(r)?.name??r,s+="- "+z(r)+`  
`);return s+=`
`,s}unpack(e,t){return g.unpackSet(e,t)}unpackSet(e,t){return I(e,0,0,t).set}importSet(e,t){return O(e.split(`
`),0,t).set}toJSON(e){return JSON.stringify(e)}fromJSON(e){if(!(!e.startsWith("{")||!e.endsWith("}")))return JSON.parse(e)}toString(e,t){return g.exportSet(e,t)}fromString(e){return g.importSet(e)}canonicalize(e,t){let s=t.species.get(e.species);e.species=y(s.battleOnly?s.baseSpecies:s.name),e.name=void 0,e.item=t.gen>=2&&e.item?y(e.item):void 0,e.ability=t.gen>=3?y(e.ability?e.ability:s.abilities[0]):void 0,e.gender=t.gen>=2&&e.gender&&e.gender!==s.gender?e.gender:void 0,e.level=e.level||100;let i=!0;if(!e.ivs)e.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};else for(let f of h)e.ivs[f]=e.ivs[f]??31,t.gen<3&&(e.ivs[f]=T(P(e.ivs[f]))),e.ivs[f]!==31&&(i=!1);let n=t.gen<3?void 0:t.natures.get(e.nature||"serious");e.nature=n&&y(n.name);let r=e.hpType,o="",a=!1,p=[];for(let f of e.moves){let u=y(f);if(u==="return"||u==="frustration")o=u;else if(u==="swordsdance")a=!0;else if(u.startsWith("hiddenpower"))if(u==="hiddenpower"){let k=e.hpType||U(t.gen,e.ivs).type;u=`${u}${k}`}else r=u.substr(11,1).toUpperCase()+u.substr(12);p.push(u)}e.moves=p.sort((f,u)=>f.localeCompare(u));let l=t.species.get(e.species).baseStats;e.evs=e.evs||{};for(let f of h)if(t.gen<3)e.evs[f]=e.evs[f]??252;else if(!e.evs[f])e.evs[f]=0;else{let u=B(t.gen,f,l[f],e.ivs[f],e.evs[f],e.level,n);if(f==="hp")e.evs[f]=l[f]===1?0:Math.max(0,(Math.ceil((u-e.level-10)*100/e.level)-2*l[f]-e.ivs[f])*4);else{let k=n?n.plus===f?1.1:n.minus===f?.9:1:1;e.evs[f]=Math.max(0,(Math.ceil((Math.ceil(u/k)-5)*100/e.level)-2*l[f]-e.ivs[f])*4)}}if(t.gen===2&&e.species==="marowak"&&e.item==="thickclub"&&a&&e.level===100){let f=Math.floor(e.ivs.atk/2)*2;for(;e.evs.atk>0&&2*80+f+Math.floor(e.evs.atk/4)+5>255;)e.evs.atk-=4}let d=t.gen>=7&&e.level===100;if(r&&i){let f=t.gen===2?N[r].dvs:N[r].ivs;for(let u of h)t.gen===2?e.ivs[u]=u in f?T(f[u]):31:d||(e.ivs[u]=f[u]??31);t.gen===2&&(e.ivs.hp=T(W(e.ivs)))}return e.hpType=r&&d?r:void 0,o==="return"?e.happiness=255:o==="frustration"?e.happiness=0:e.happiness=void 0,e.shiny=t.gen>=2&&e.shiny?e.shiny:void 0,e.pokeball=void 0,e.dynamaxLevel=t.gen===8?e.dynamaxLevel:void 0,e.gigantamax=t.gen===8&&e.gigantamax?e.gigantamax:void 0,e.teraType=t.gen===9?e.teraType:void 0,e}},_=["","0","1","H","S"];function I(e,t=0,s=0,i){let n={};if(s=e.indexOf("|",t),s<0)return{i:t,j:s};if(n.name=e.substring(t,s),t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};if(n.species=S(e.substring(t,s),i?.species)||n.name,t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};if(n.item=S(e.substring(t,s),i?.items),t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};let r=S(e.substring(t,s),i?.abilities);if(r==="-")r="";else if(_.includes(r)){if(i){let a=i.species.get(n.species);a?.baseSpecies==="Zygarde"&&r==="H"?r="Power Construct":a?.abilities&&(r=a.abilities[r||"0"])}if(r!==""&&!r)return{i:t,j:s}}if(n.ability=r,t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};if(n.moves=e.substring(t,s).split(",",24).filter(a=>a).map(a=>S(a,i?.moves)),t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};if(n.nature=S(e.substring(t,s),i?.natures),t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};if(n.evs={hp:0,atk:0,def:0,spa:0,spd:0,spe:0},s!==t){let a=e.substring(t,s);if(a.length>5){let p=a.split(",");n.evs.hp=Number(p[0])||n.evs.hp,n.evs.atk=Number(p[1])||n.evs.atk,n.evs.def=Number(p[2])||n.evs.def,n.evs.spa=Number(p[3])||n.evs.spa,n.evs.spd=Number(p[4])||n.evs.spd,n.evs.spe=Number(p[5])||n.evs.spe}}if(t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};if(t!==s&&(n.gender=e.substring(t,s)),t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};if(n.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31},s!==t){let a=e.substring(t,s).split(",",6);n.ivs.hp=a[0]===""?31:Number(a[0])||0,n.ivs.atk=a[1]===""?31:Number(a[1])||0,n.ivs.def=a[2]===""?31:Number(a[2])||0,n.ivs.spa=a[3]===""?31:Number(a[3])||0,n.ivs.spd=a[4]===""?31:Number(a[4])||0,n.ivs.spe=a[5]===""?31:Number(a[5])||0}if(t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};if(t!==s&&(n.shiny=!0),t=s+1,s=e.indexOf("|",t),s<0)return{i:t,j:s};t!==s&&(n.level=parseInt(e.substring(t,s))),t=s+1,s=e.indexOf("]",t);let o;return s<0?t<e.length&&(o=e.substring(t).split(",",6)):t!==s&&(o=e.substring(t,s).split(",",6)),o&&(n.happiness=o[0]?Number(o[0]):255,n.hpType=o[1]||"",n.pokeball=S(o[2]||"",i?.items),n.gigantamax=!!o[3],n.dynamaxLevel=o[4]?Number(o[4]):10,n.teraType=o[5]||""),{set:n,i:t,j:s}}var $=/^[A-Za-z]+ (N|n)ature/;function O(e,t=0,s){let i;for(;t<e.length;t++){let n=e[t].trim();if(n===""||n==="---"||n.substr(0,3)==="==="||n.includes("|"))return{set:i,line:t};if(i){if(n.substr(0,7)==="Trait: ")n=n.substr(7),i.ability=n;else if(n.substr(0,9)==="Ability: ")n=n.substr(9),i.ability=n;else if(n==="Shiny: Yes")i.shiny=!0;else if(n.substr(0,7)==="Level: ")n=n.substr(7),i.level=+n;else if(n.substr(0,11)==="Happiness: ")n=n.substr(11),i.happiness=+n;else if(n.substr(0,10)==="Pokeball: ")n=n.substr(10),i.pokeball=n;else if(n.substr(0,14)==="Hidden Power: ")n=n.substr(14),i.hpType=n;else if(n.substr(0,11)==="Tera Type: ")n=n.substr(11),i.teraType=n;else if(n.substr(0,15)==="Dynamax Level: ")n=n.substr(15),i.dynamaxLevel=+n;else if(n==="Gigantamax: Yes")i.gigantamax=!0;else if(n.substr(0,5)==="EVs: "){n=n.substr(5);let r=n.split(" / ");i.evs={hp:0,atk:0,def:0,spa:0,spd:0,spe:0};for(let o of r){let a=o.indexOf(" ");if(a===-1)continue;let p=H[o.substr(a+1)],l=parseInt(o.substr(0,a));p&&(i.evs[p]=l)}}else if(n.substr(0,5)==="IVs: "){n=n.substr(5);let r=n.split(" / ");i.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};for(let o of r){let a=o.indexOf(" ");if(a===-1)continue;let p=H[o.substr(a+1)],l=parseInt(o.substr(0,a));p&&(isNaN(l)&&(l=31),i.ivs[p]=l)}}else if($.exec(n)){let r=n.indexOf(" Nature");r===-1&&(r=n.indexOf(" nature")),n=n.substr(0,r),n!=="undefined"&&(i.nature=n)}else if(n.substr(0,1)==="-"||n.substr(0,1)==="~"){n=n.substr(1),n.substr(0,1)===" "&&(n=n.substr(1)),i.moves||(i.moves=[]);let r=A(n);if(r){n="Hidden Power "+r.toString();let o=L(r,s);if(!i.ivs&&o){i.ivs={hp:31,atk:31,def:31,spa:31,spd:31,spe:31};let a;for(a in o)i.ivs[a]=o[a]}}n==="Frustration"&&i.happiness===void 0&&(i.happiness=0),i.moves.push(n)}}else{i={name:"",species:"",gender:""};let r=n.lastIndexOf(" @ ");r!==-1&&(i.item=n.substr(r+3),y(i.item)==="noitem"&&(i.item=""),n=n.substr(0,r)),n.substr(n.length-4)===" (M)"&&(i.gender="M",n=n.substr(0,n.length-4)),n.substr(n.length-4)===" (F)"&&(i.gender="F",n=n.substr(0,n.length-4));let o=n.lastIndexOf(" (");if(n.substr(n.length-1)===")"&&o!==-1){n=n.substr(0,n.length-1);let a=n.substr(o+2);i.species=s?.species.get(a)?.name??a,n=n.substr(0,o),i.name=n}else i.species=s?.species.get(n)?.name??n,i.name=""}}return{set:i,line:t+1}}function A(e){if(e.substr(0,14)==="Hidden Power [")return e.substr(14,e.length-15);if(e.substr(0,13)==="Hidden Power ")return e.substr(13);if(e.substr(0,11)==="hiddenpower")return e.substr(11,1).toUpperCase()+e.substr(12)}function z(e){return e.substr(0,14)==="Hidden Power ["?e:e.substr(0,13)==="Hidden Power "?e.substr(0,13)+"["+e.substr(13)+"]":e.substr(0,11)==="hiddenpower"?"Hidden Power ["+e.substr(11,1).toUpperCase()+e.substr(12)+"]":e}function b(e){return e?e.replace(/[^A-Za-z0-9]+/g,""):""}function S(e,t){if(!e)return"";if(t){let s=t.get(e);if(s?.exists)return s.name}return e.replace(/([0-9]+)/g," $1 ").replace(/([A-Z])/g," $1").replace(/[ ][ ]/g," ").trim()}var N={Bug:{ivs:{atk:30,def:30,spd:30},dvs:{atk:13,def:13}},Dark:{ivs:{},dvs:{}},Dragon:{ivs:{atk:30},dvs:{def:14}},Electric:{ivs:{spa:30},dvs:{atk:14}},Fighting:{ivs:{def:30,spa:30,spd:30,spe:30},dvs:{atk:12,def:12}},Fire:{ivs:{atk:30,spa:30,spe:30},dvs:{atk:14,def:12}},Flying:{ivs:{hp:30,atk:30,def:30,spa:30,spd:30},dvs:{atk:12,def:13}},Ghost:{ivs:{def:30,spd:30},dvs:{atk:13,def:14}},Grass:{ivs:{atk:30,spa:30},dvs:{atk:14,def:14}},Ground:{ivs:{spa:30,spd:30},dvs:{atk:12}},Ice:{ivs:{atk:30,def:30},dvs:{def:13}},Poison:{ivs:{def:30,spa:30,spd:30},dvs:{atk:12,def:14}},Psychic:{ivs:{atk:30,spe:30},dvs:{def:12}},Rock:{ivs:{def:30,spd:30,spe:30},dvs:{atk:13,def:12}},Steel:{ivs:{spd:30},dvs:{atk:13}},Water:{ivs:{atk:30,def:30,spa:30},dvs:{atk:14,def:13}}},w=["Fighting","Flying","Poison","Ground","Rock","Bug","Ghost","Steel","Fire","Water","Grass","Electric","Psychic","Ice","Dragon","Dark"];function U(e,t){let s=(n,r=0)=>r?(n>>>0)%2**r:n>>>0,i={hp:31,atk:31,def:31,spe:31,spa:31,spd:31};if(e<=2){let n=s(t.atk/2),r=s(t.def/2),o=s(t.spe/2),a=s(t.spa/2);return{type:w[4*(n%4)+r%4],power:s((5*((a>>3)+2*(o>>3)+4*(r>>3)+8*(n>>3))+a%4)/2+31)}}else{let n=0,r=0,o=1;for(let a in i)n+=o*(t[a]%2),r+=o*(s(t[a]/2)%2),o*=2;return{type:w[s(n*15/63)],power:e<6?s(r*40/63)+30:60}}}function L(e,t){let s=N[e];if(s)return t?.gen===2?Y(s.dvs):s.ivs}function Y(e){let t={},s;for(s in e)t[s]=T(e[s]);return t}function P(e){return Math.floor(e/2)}function T(e){return e*2+1}function W(e){return P(e.atk===void 0?31:e.atk)%2*8+P(e.def===void 0?31:e.def)%2*4+P(e.spe===void 0?31:e.spe)%2*2+P(e.spa===void 0?31:e.spa)%2}var m=(e,t=0)=>t?(e>>>0)%2**t:e>>>0;function B(e,t,s,i=31,n,r=100,o){if(n===void 0&&(n=e<3?252:0),e<3&&(i=P(i)*2,o=void 0),t==="hp")return s===1?s:m(m(2*s+i+m(n/4)+100)*r/100+10);{let a=m(m(2*s+i+m(n/4))*r/100+5);if(o!==void 0){if(o.plus===t)return m(m(a*110,16)/100);if(o.minus===t)return m(m(a*90,16)/100)}return a}}var V=9,v=class e{constructor(t,s,i,n,r){this.team=t;this.data=s;this.format=i;this.name=n;this.folder=r;this.team=t,this.format=i,this.name=n,this.folder=r,this.data=s,i&&s?.forGen&&(i.slice(0,3)==="gen"?this.data=s.forGen(parseInt(i[3])):(this.format=`gen6${i}`,this.data=s.forGen(6)))}get gen(){return this.data?.gen}pack(){return c.packTeam(this)}static unpack(t,s){return c.unpackTeam(t,s)}export(t){let s="";for(let i of this.team)s+=g.exportSet(i,t||this.data);return s}static import(t,s){return c.importTeam(t,s)}toString(t){return this.export(t)}static fromString(t,s){let i=c.importTeams(t,s,!0,!0);return i.length?i[0]:void 0}toJSON(){return JSON.stringify(this.team)}static fromJSON(t){if(t.charAt(0)!=="["||t.charAt(t.length-1)!=="]")return;let s=JSON.parse(t);return new e(s)}static canonicalize(t,s){let i,n=[];for(let r of t){let o=g.canonicalize(r,s);i?n.push([o.species,o]):i=o}return[i,...n.sort((r,o)=>r[0].localeCompare(o[0])).map(([,r])=>r)]}},c=new class{packTeam(e){let t="";for(let s of e.team)t&&(t+="]"),t+=g.packSet(s);return t}unpackTeam(e,t){if(!e)return;if(e.charAt(0)==="["&&e.charAt(e.length-1)==="]")return v.fromJSON(e);let s=[],i=0,n=0;for(let r=0;r<24;r++){let o=I(e,i,n,t);if(!o.set)return;if(s.push(o.set),i=o.i,n=o.j,n<0)break;i=n+1}return new v(s,t)}importTeam(e,t){let s=c.importTeams(e,t,!0);return s.length?s[0]:void 0}importTeams(e,t,s,i){let n=e.split(`
`);if(n.length===1||n.length===2&&!n[1]){let p=i?G(n[0],t):c.unpackTeam(n[0],t);return p?[p]:[]}let r=[],o=-1,a=[];for(let p=0;p<n.length;p++){let l=n[p].trim();if(l.substr(0,3)==="==="){if(s&&r.length)return r;a=[],l=l.substr(3,l.length-6).trim();let d=`gen${t?.gen||V}`,f=l.indexOf("]");f>=0&&(d=l.substr(1,f-1),l=l.substr(f+1).trim());let u=l.lastIndexOf("/"),k="";u>0&&(k=l.slice(0,u),l=l.slice(u+1)),r.push(new v(a,t,d,l,k))}else if(l.includes("|")){let d=G(l,t);d&&r.push(d)}else if(o!==p){let d=O(n,p,t);if(d.set&&a.push(d.set),d.line===p)continue;o=d.line,p=o-1}}return a.length&&!r.length&&r.push(new v(a,t)),r}exportTeams(e,t){let s="",i=0;for(let n of e)s+="=== "+(n.format?"["+n.format.toString()+"] ":"")+(n.folder?""+n.folder+"/":"")+(n.name||"Untitled "+ ++i)+` ===

`,s+=n.export(t),s+=`
`;return s}toString(e,t){return c.exportTeams(e,t)}fromString(e,t){return c.importTeams(e,t,!1,!0)}};function G(e,t){let s=e.indexOf("|");if(s<0)return;let i=e.indexOf("]");i>s&&(i=-1);let n=e.lastIndexOf("/",s);n<0&&(n=i);let r=i>0?e.slice(0,i):`gen${t?.gen||V}`,o=c.unpackTeam(e.slice(s+1),t);return o&&new v(o.team,t,r,e.slice(n+1,s),e.slice(i+1,n>0?n:i+1))}return J(Z);})();